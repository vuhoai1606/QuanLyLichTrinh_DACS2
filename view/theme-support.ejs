<!-- Global Theme and i18n Support -->
<!-- Include this file in the <head> of every page -->

<!-- Dark Mode CSS -->
<link rel="stylesheet" href="/css/dark-mode.css">

<!-- i18n JavaScript -->
<script src="/js/i18n.js"></script>

<!-- Apply theme immediately on load to prevent flash -->
<script>
  (function() {
    // Default to 'light' theme if nothing saved
    const savedTheme = localStorage.getItem('theme') || 'light';
    
    console.log('ðŸŽ¨ Applying initial theme:', savedTheme);
    
    // Wait for DOM to be ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', applyTheme);
    } else {
      applyTheme();
    }
    
    function applyTheme() {
      const body = document.body;
      if (!body) return; // Safety check
      
      if (savedTheme === 'dark') {
        body.setAttribute('data-theme', 'dark');
        body.classList.add('dark-mode');
        console.log('âœ… Dark mode applied on load');
      } else if (savedTheme === 'light') {
        body.setAttribute('data-theme', 'light');
        body.classList.add('light-mode');
        console.log('âœ… Light mode applied on load');
      } else {
        // System theme
        body.setAttribute('data-theme', 'system');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (prefersDark) {
          body.classList.add('dark-mode');
          console.log('âœ… System mode (dark) applied on load');
        } else {
          body.classList.add('light-mode');
          console.log('âœ… System mode (light) applied on load');
        }
      }
    }
  })();
</script>
